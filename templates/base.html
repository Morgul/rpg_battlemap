<!DOCTYPE html>
<html>
<head>
	<link type="text/css" href="/css/base.css" rel="stylesheet" />
	<link type="text/css" href="/contrib/css/smoothness/jquery-ui.css" rel="stylesheet" />
	<script type="text/javascript" src="/contrib/jquery.js"></script>
	<script type="text/javascript" src="/contrib/jquery-ui.min.js"></script>
	<script type="text/javascript" src="/contrib/jquery.mousewheel.min.js"></script>
	{% block page_scripts %}
	<script type="text/javascript" src="/contrib/raphael-min.js"></script>
	<script type="text/javascript" src="/js/battlemap.js"></script>
	{% endblock %}
	<title>RPG Battle Map{% block title %}{% endblock %}</title>
	{% block page_style %}
	{% endblock %}
</head>
<body>
<div id="head">
{% if session.user %}
<span class="login">Welcome, {{ session.user.name }}.  <a href="/account/logout/">{% trans "Sign Off" %}</a></span>
{% else %}
<form id="login" class="login" action="/account/login/" method="post">
	<input name="openid" placeholder="{% trans "OpenID" %}" />
	<input type="submit" value="{% trans "Login" %}" />
</form>
{% endif %}
</div>
<div id="main">
{% block content %}
	<div id="leftColumn">
		<input name="mapName" id="mapname" value="Default Map" onchange="battleMap.name=this.value;" />
		<button onclick="saveBattleMapLocal();">Save</button>
		<div id="leftColumnItems">
		<h3><a href="#">Combatants</a></h3>
		<div id="combatantInfo">
			<div object-property="color" display-attr="style" style-display="border-color" style="float: left; width: 48px; height: 48px; border-width: 3px; margin:3px; border-style:solid;">
			<img object-property="image" display-attr="src" style="width:100%; height: 100%;" display-default="/images/default_combatant.png"/>
		</div>
			<p object-property="name">&nbsp;</p>
			<p>cell
				<span object-property="cellX">&nbsp;</span>, <span object-property="cellY">&nbsp;</span>
			</p>
			<p id="combatantConditions">&nbsp;</p>
			<ul id="combatantList">
			</ul>
		</div>
		<h3><a href="#">New Combatant</a></h3>
		<div id="addCombatant">
			<form name="addCombatant">
				<p>
					<input name="name" placeholder="Combatant Name" />
				</p>
				<p>
					<label>Starting Position</label>
					<input style="width: 4em;" name="cellX" placeholder="X" type="number" />,
					<input style="width: 4em;" name="cellY" placeholder="Y" type="number" /></p>
				<p>
					<label for="color">Color</label>
					<input name="color" placeholder="blue" type="color" />
				</p>
				<p>
					<label for="initiative">Initiative</label>
					<input name="initiative" placeholder="10" type="number" />
				</p>
				<p>
					<label for="size">Size</label>
					<input name="size" value="1" type="number" />
				</p>
				<p>
					<input name="create" type="submit" value="Add Combatant" />
				</p>
			</form>
		</div>
		<h3><a href="#">Zone List</a></h3>
		<div id="zoneEditor">
			<ul id="zoneList">
			</ul>
			<form name="zoneEditor" action="javascript:void(0)">
				<p>
					<label for="editZonesToggle">Enabled Zone Edits</label>
					<input id="editZonesToggle" type="checkbox" />
				</p>
				<p>
					<label>Top Left Corner</label>
					<input style="width: 4em;" name="cellX" placeholder="X" type="number" />, 
					<input style="width: 4em" name="cellY" placeholder="Y" type="number" />
				</p>
				<p>
					<label for="rotation">Rotation</label>
					<select name="rotation">
						<option value="none">None</option>
						<option value="cw">&#x21BB; a quarter</option>
						<option value="ccw">&#x21BA; a quarter</option>
						<option value="about">Half-turn</option>
					</select>
				</p>
				<p>
					<label for="layer">Above or Below Combatants</label>
					<select name="layer">
						<option value="ground">Below</option>
						<option value="sky">Above</option>
					</select>
				</p>
				<p>
					<label for="color">Color</label>
					<input name="color" />
				</p>
				<p>
					<label for="strokeColor">Border Color</label>
					<input name="strokeColor" />
				</p>
				<p>
					<label for="strokeOpacity">Border Opacity Percentage</label>
					<input name="strokeOpacity" type="number" />
				</p>
				<p>
					<label>Path Data</label>
					<textarea name="path" rows="7"></textarea>
				</p>
				<p>While editing is enabled, you can add a new point connected to 
the most recent point by clicking.  To remove a point, secondary (right) 
click on it.  To add a point on an existing line, secondary click on the
line.  To move a point, drag it to the desired position.
				</p>
				<p>
					<input type="hidden" name="zoneIndex" />
					<input type="submit" value="Save" />
				</p>
			</form>
		</div>
		<h3><a href="#">New Zone</a></h3>
		<div>
			<form id="newZone" name="newZone">
				<p>New Zone</p>
				<p>
					<label for="name">Name</label>
					<input name="name" />
				</p>
				<p>
					<label for="size">Edge Size</label>
					<input type="number" name="size" />
				</p>
				<p>
					<label for="shape">Shape</label>
					<select name="shape">
						<option value="square">Square</option>
						<option value="octogon">Octogon</option>
					</select>
				</p>
				<p>
					<label for="layer">Ground or Sky</label>
					<select name="layer">
						<option value="ground">Ground</option>
						<option value="sky">Sky</option>
					</select>
				</p>
				<p>
					<label for="color">Color</label>
					<input name="color" />
				</p>
				<p>
					<input type="submit" value="Create" />
				</p>
			</form>
		</div>
		<h3><a href="#">Saved Maps</a></h3>
		<div>
			<ul id="savedMapsList">
			</ul>
		</div>
		</div>
	</div>
	<div id="rightColumn" class="ui-corner-all">
		<div id="drawingBoard">
			<canvas id="canvasBoard"></canvas>
		</div>
	</div>
</div>
<script type="text/javascript" src="/js/base.js"></script>
{% endblock %}
</body>
